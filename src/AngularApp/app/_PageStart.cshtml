@{
    // Check if partial views is requested, if so, apply a layout template to it
    Layout = Request.AppRelativeCurrentExecutionFilePath.StartsWith("~/app/") ? null : "~/app/layout/layout.cshtml";

    // The 'templateUrl' property is set in Routing/DefaultRouteHandler.cs
    if (Request.RequestContext.RouteData.DataTokens["templateUrl"] == "/app/404")
    {
        Response.StatusCode = 404;
    }
}
